{% load staticfiles %}

<link rel="stylesheet" type="text/css" href="{% static 'gendep/style.css' %}" />

<style type="text/css">
    .jsAction {
        cursor: pointer;
        color: #00f;
        text-decoration: underline;
    }
</style>

<h1 style="text-align: center;">Database of Geneic Dependencies in Cancer</h1>

{% if error_message %}<p><strong>{{ error_message }}</strong></p>{% endif %}

<!-- histotype.full_name  -->

<p>Tissue type: {% if histotype == "ALL_HISTOTYPES" %} All histotypes {% else %} {{ histotype }} {% endif %}</p>
<p>Study: {% if histotype == "ALL_STUDIES" %} All studies {% else %} <a href="http://www.ncbi.nlm.nih.gov/pubmed/{{ study.pmid }}" target="_blank">{{ study.pmid }}</a> {{ study.title }} {% endif %} </p>

<p><b>Driver Gene: {{ driver.gene_name }}</b></p>
<p><u>Synonyms:</u> {{ driver.synonyms }} {{ driver.prev_names }}</p>
<p><u>Gene Descripion:</u> {{ driver.full_name }}</p>
<p><u>External links:</u>
  <a href="http://www.genecards.org/cgi-bin/carddisp.pl?gene={{ driver.gene_name }}" title="Genecards" target="_blank">GeneCards</a> 
| <a href="http://www.ncbi.nlm.nih.gov/gene/{{ driver.entrez_id }}" title="Entrez Gene at NCBI" target="_blank">Entrez</a> 
| <a href="http://www.ensembl.org/Homo_sapiens/Gene/Summary?g={{ driver.ensembl_id }}" title="Ensembl Gene" target="_blank">Ensembl</a> 
| <a href="http://vega.sanger.ac.uk/Homo_sapiens/Gene/Summary?g={{ driver.vega_id }}" title="Vertebrate Genome Annotation" target="_blank">Vega</a> 
| <a href="http://www.omim.org/entry/{{ driver.omim_id }}" title="Online Mendelian Inheritance in Man" target="_blank">OMIM</a>
| <a href="http://www.genenames.org/cgi-bin/gene_symbol_report?hgnc_id={{ driver.hgnc_id }}" title="HUGO Gene Nomenclature Committee" target="_blank">HGNC</a> 
| <a href="http://www.cancerrxgene.org/translation/Search?query={{ driver.gene_name }}" title="CancerRxGene search" target="_blank">CancerRxGene</a> 
| <a href="http://www.cbioportal.org/ln?q={{ driver.gene_name }}" title="cBioPortal for Cancer Genomics" target="_blank">cBioPortal</a> 
| <a href="http://cancer.sanger.ac.uk/cosmic/gene/analysis?ln={{ driver.gene_name }}" title="Catalogue of Somatic Mutations in Cancer" target="_blank">COSMIC</a> 
| <a href="https://cansar.icr.ac.uk/cansar/molecular-targets/{{ driver.uniprot_id }}/" title="CanSAR" target="_blank">CanSAR</a> 
</p>

{% comment %}
<!--
            <ul class="list-inline">
                    <li>HGNC: <a href="http://www.genenames.org/cgi-bin/gene_symbol_report?hgnc_id=3430" target="_blank">3430</a></li>
                    <li>Entrez Gene: <a href="http://www.ncbi.nlm.nih.gov/entrez/query.fcgi?db=gene&amp;cmd=Retrieve&amp;dopt=full_report&amp;list_uids=2064" target="_blank">2064</a></li>
                    <li>Ensembl: <a href="http://www.ensembl.org/Homo_sapiens/geneview?gene=ENSG00000141736" target="_blank">ENSG00000141736</a></li>
                    <li>OMIM: <a href="http://omim.org/entry/164870" target="_blank">164870</a></li>
                    <li>UniProtKB: <a href="http://www.uniprot.org/uniprot/P04626" target="_blank">P04626</a></li>
            </ul>
-->
<!--
script
set_graph(driver,target)
{% url 'gendep:graph' dependency.driver.gene_name dependency.target.gene_name }}
-->
<!--
<a href="set_graph( {{ dependency.driver.gene_name }}, {{ dependency.target.gene_name }} );"/>{{ dependency.target.gene_name }}</a>
-->
<!-- 
When using the Histotype table class, then below use: dependency.histotype.full_name,
but when using the choices CharField, use: dependency.get_histotype_display() 
-->
{% endcomment %}

{% if dependency_list %}
  <table border="1" cellspacing="0">
    <tr><th>Dependency</th><th>P-value</th><th>PubMed ID</th><th>Tissue</th><th>Inhibitors</th><th>Experiment Details</th></tr>
    {% for dependency in dependency_list %}
    <tr> 
        <td><span class="jsAction" onclick="set_graph( {{ dependency.driver.gene_name }}, {{ dependency.target.gene_name }} );">{{ dependency.target.gene_name }}</span></td>
        <td>{{ dependency.wilcox_p }}</td>
        <td><a href="http://www.ncbi.nlm.nih.gov/pubmed/{{ dependency.study_pmid.pmid }}" target="_blank">{{ dependency.study.pmid }}</a></td>
        <td>{{ dependency.get_histotype_display }}</td>
        <td></td>
        <td>{{ dependency.study.summary }}</td>
    </tr>
    {% endfor %}
  </table>
{% else %}
    <p>No dependencies found.</p>
{% endif %}
