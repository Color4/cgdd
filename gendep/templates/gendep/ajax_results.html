{% load staticfiles %}
<table align="center" cellpadding="6" style="border: 1px solid blue;">
<tr><td>
<p><b>Driver Gene: {{ driver.gene_name }}</b>  &nbsp; &nbsp; &nbsp; <u>Synonyms:</u> {{ driver.prev_names_and_synonyms_spaced }}</p>
<p><u>Gene Descripion:</u> {{ driver.full_name }}</p>
<p><u>External links:</u> {{ gene_weblinks|safe }}</p>

{% comment %}
	Now using flashbox:
	Note: ID's are single use and are only applied to one element. Galleries are created from elements who have the same "data-fancybox-group" or "rel" attribute value.   Use `title` or `data-fancybox-title` attribute to specify item caption.
    Note: The boxplot 'data-fancy-title' text needs single quotes around it, as the gene_weblinks contains double quotes.
    Need the 'safe' filter for the 'web_genelinks' otherwise django will put double quotes arround the string as assumes it is unsafe.
{% endcomment %}

For driver gene <b>{{ driver.gene_name }}</b>, a total of <b>{{ dependency_list.count }} dependencies</b> were found {% if histotype == "ALL_HISTOTYPES" %} in <b>All histotypes</b> {% else %} with tissue type <b>{{ histotype_full_name }}</b> {% endif %} {% if study == "ALL_STUDIES" %} in <b>All studies</b> {% else %} in study {{ study.weblink|safe }} "{{ study.title }}", {{ study.authors|slice:":30" }} et al, {{ study.journal }}, {{ study.pub_date }} {% endif %}:<br/>
<div style="font-size: 70%;">( Use scrollbar at right of this table to scroll down. Click column header to sort by that column. Click on the gene name in the depenency column to view the box-plot. Enter text into the search box at top of column to optionally filter these results )</div>
 <!-- a href="http://www.ncbi.nlm.nih.gov/pubmed/{{ study.pmid }}" target="_blank">{{ study.pmid }}</a --> 
{% if dependency_list %}
{# <p style="font-size: 75%;">For Driver 'ERBB2': Click the 'MAP2K3' dependency to display the box plot at bottom of this table.</p> #}
</td></tr>
</table>
  <table id="result_table" class="tablesorter"> <!-- tabler  -->
  <thead>
    <tr><th>Dependency</th><th>P-value</th><th>Study</th><th>Tissue</th><th>Inhibitors</th><th>Experiment Type</th></tr>
  </thead>
  <tbody>
    {% for dependency in dependency_list %}
    <tr> 
        <td>
		<a class="fancybox tip" rel="group" href="{% static 'gendep/boxplots/' %}{{ dependency.driver.gene_name }}_{{ dependency.target.gene_name }}_{{ dependency.histotype }}__PMID{{ dependency.study.pmid }}.png" data-fancybox-width="1000" data-fancybox-title='<b>{{ dependency.driver.gene_name }}</b> mutant cell lines have an increased dependency upon <b>{{ dependency.target.gene_name}}</b> (p={{ dependency.wilcox_p }} | Tissues={{ dependency.get_histotype_display }} | Source={{ dependency.study.weblink|safe }})<br/><font size="-2">{{ dependency.driver.gene_name }} links: {{ gene_weblinks|safe }}<br/>{{ dependency.target.gene_name }} links: {{ dependency.target.external_links|safe }}</font>' >{{ dependency.target.gene_name }} &nbsp; <font size="-2">{{ dependency.target.prev_names_and_synonyms_spaced }}</font><span>{{ dependency.target.full_name }}: {{ dependency.target.prev_names_and_synonyms_spaced }}</span></a></td>

        <td>{{ dependency.wilcox_p }}</td>

        <td>{{ dependency.study.weblink|safe }}</td>

        <td>{{ dependency.get_histotype_display }}</td>

        <td></td>

        <td><a href="#" class="tip">{{ dependency.study.experiment_type }}<span>{{ dependency.study.summary }}</span></a></td>
    </tr>
    {% endfor %}
	</tbody>
  </table>
{% else %}
    <p>No dependencies found.</p>
{% endif %}

